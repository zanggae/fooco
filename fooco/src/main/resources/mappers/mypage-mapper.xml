<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="mypageMapper">


<!-- 맴버 (맴버 테이블 + 맴버십이름 + 프로필 사진) -->
<resultMap type="Member" id="memberListResultSet">
	<id property="memberId" column="MEMBER_ID"></id>
	<result property="memberName" column="MEMBER_NAME"></result>
	<result property="memberPwd" column="MEMBER_PWD"></result>
	<result property="email" column="EMAIL"></result>
	<result property="nickName" column="NICKNAME"></result>
	<result property="gender" column="GENDER"></result>
	<result property="phone" column="PHONE"></result>
	<result property="address" column="ADDRESS"></result>
	<result property="memberEnrolldate" column="MEMBER_ENROLLDATE"></result>
	<result property="memberModifydate" column="MEMBER_MODIFYDATE"></result>
	<result property="memberAccessdate" column="MEMBER_ACCESSDATE"></result>
	<result property="memberStatus" column="MEMBER_STATUS"></result>
	<result property="memberJoinType" column="MEMBERJOIN_TYPE"></result>
	<result property="reviewStatus" column="REVIEW_STATUS"></result>
	<result property="membershipName" column="MEMBERSHIP_NAME"></result>
	<result property="profileId" column="PROFILE_ID"></result>
	<result property="originalName" column="ORIGINAL_NAME"></result>
	<result property="renameName" column="RENAME_NAME"></result>
	<result property="uploadDate" column="UPLOAD_DATE"></result>
	<result property="file_path" column="FILE_PATH"></result>	
</resultMap>




<!-- 팔로워 수 카운트 쿼리 -->
 <select id="selectOneFollowCount" parameterType="Member" resultType="_int">
SELECT COUNT(*)
FROM FOLLOW
WHERE FOLLOWING_ID = #{memberId}
</select>
 
<!-- 팔로잉 수 카운트 쿼리 -->
 <select id="selectOneFollowingCount" parameterType="Member" resultType="_int">
SELECT COUNT(*)
FROM FOLLOW
WHERE FOLLOWER_ID = #{memberId}
</select> 

<!-- 프로필 사진 조회 쿼리 -->
<select id="selectOneProFile" parameterType="Member" resultType="string">
SELECT RENAME_NAME
FROM PROFILE_IMG
WHERE MEMBER_ID = #{memberId}
</select>

<update id="updateMemberProfile" parameterType="Member">
UPDATE PROFILE_IMG SET RENAME_NAME = #{renameName} WHERE MEMBER_ID = ${memberId}
</update>



</mapper>
