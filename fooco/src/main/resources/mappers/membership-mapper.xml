<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="membershipMapper">
<resultMap type="Membership" id="membershipResultSet">
	<id property="membershipId" column="MEMBERSHIP_ID"></id>
	<result property="membershipName" column="MEMBERSHIP_NAME"></result>
	<result property="membershipContent" column="MEMBERSHIP_CONTENT"></result>
	<result property="membershipPrice" column="MEMBERSHIP_PRICE"></result>
	<result property="membershipDuringDate" column="MEMBERSHIP_DURINGDATE"></result>
	<result property="membershipEnrollDate" column="MEMBERSHIP_ENROLLDATE"></result>
	<result property="membershipExpireDate" column="MEMBERSHIP_EXPIREDATE"></result>
	<result property="membershipStatus" column="MS_STATUS"></result>
</resultMap>

<!-- 멤버십 조회 -->
<select id="selectMembership" resultMap="membershipResultSet">
	SELECT *
	FROM MEMBERSHIP
</select>

<!-- 결제 후 멤버십 insert -->
<insert id="insertMembership" parameterType="Membership">
	INSERT ALL
    	INTO MEMBERSHIP_LIST VALUES(SEQ_MEMBERSHIPLISTID.NEXTVAL,#{buy_memberId},#{membershipId1},SYSDATE,SYSDATE,DEFAULT)
    	INTO COUPON_LIST VALUES(SEQ_COUPONLISTID.NEXTVAL,1,SEQ_MEMBERSHIPLISTID.CURRVAL,SYSDATE,SYSDATE,DEFAULT)
        INTO PAYMENT_LIST VALUES(SEQ_PAYMENTLISTID.NEXTVAL,#{membershipId1},#{buy_memberId},SYSDATE)
    	SELECT *
    	FROM DUAL
</insert>
  
</mapper>
